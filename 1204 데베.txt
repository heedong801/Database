1204 정규화

제 1 정규형

조건
반복 그룹이 없다 -> 다치 애트리뷰트가 없다

그렇다면 어떻게 해결할까?

튜플을 여러개 만들어서 나누어준다.
따라서 학번만으로 키가 될 수 없으니 과목번호가 같이 키가 된다.

관계형 데이타 모델에 다치형 애트리뷰트가 없다면, 제 1정규형을 만족한 것
제 1 정규형이 만족하더라도 데이터의 중복이 있을 수 있음 => 갱신 이상 발생 가능, 수정 이상 발생 가능, 삽입 이상 발생 가능

엔티티 무결성 제약 조건 : 키는 null 안됨

무손실 분리? 하려면 조인 하려는 테이블들은 공유하는 놈이 있어야 하는데, 그 놈은 기본키 - 외래키 관계여야 한다.

제 2 정규형

조건
부분 함수적 종속성이 없어야 한다.

부분적으로 종속되기 위해서는 기본 키 애트리뷰트가 여러 개여야만 부분적으로 종속이 가능하다.
즉 모든 릴레이션이 키 애트리뷰트가 1개로만 이루어져 있다면, 이미 제 2정규형을 만족한다.

N:M 관계의 관계타입은 두 개의 애트리뷰트의 조합으로 키가 되었다 하더라도, 키가 아닌 애트리뷰트가 없으면 따질 필요 없음.


문제점
역시 갱신 이상이 발생할 수 있음 -> 수정 이상, 삭제 이상 역시 같이 발생

이행적 함수적 종속성이 있으면 -> 중복 문제 발생

제 3 정규형

이행적 함수적 종속성이 없어야 한다.
그래도 갱신 이상 발생

왜?
키가 아닌 결정자가 있기 때문 
강사 -> 과목을 결정함

BCNF

모든 결정자가 후보 키여야 한다.
잘라내면 한 쪽은 기본키가 명확해진다.
그럼 나머지 한 쪽은 조인을 가능하게 하기 위해 외래 키로 상대쪽 기본키를 가져온다.

정규화
장점
-중복 감소, 갱신 이상 감소, 무결성 제약조건을 시행하기 위해 필요한 코드의 양도 감소됨
단점
-성능 저하

R의 키는 무엇인가?
-A,B
R을 제 2정규형으로 만들어라


풀이)
A,B -> A,B를 결정할 수 있음 - 암스트롱의 재귀 추론?
A,B -> D,E 왜? A가 D,E를 결정하니까 이행적 함수적 종속에 의해서
A,B -> F 역시 B가 이행적 함수적 종속에 의해서
A,B -> G 역시 이행성 규칙
A,B -> I,J 역시 이행성

A 가 결정하는 것 찾기 : A,D,E,I,J 키 : A
B 가 결정하는 것 찾기 : B,F,G,H 키 : B
A,B가 결정하는 것 찾기 : C 키 : A,B
기본키 외래키 관계 확인하기


키를 찾는 힌트 : 피결정자에 나오지 않는 애트리뷰트는 키 애트리뷰트에 들어갈 확률이 높다
만약 서로가 서로를 결정하는 경우엔 피결정자의 경우에도 키가 될 수 있음

******************************************************트랙잭션
정의 : DBMS에서 사용하는 작업의 단위

트랙잭션의 ACID 특성**************************************
-A원자성
-I고립성
-D지속성
-C일관성


원자성
-트랜잭션은 작업의 가장 작은 단위로써, 더 이상 쪼개지지 않음 => 중간까지 수행되고 마는 것이 아니다.( All done or None done )

일관성
-데이터베이스의 무결성 제약조건을 만족하는 일관성이 있는 데이터베이스는 -> 트랙잭션 후에도 상태는 다르지만 일관된 상태인 데이터베이스이다.
*************그럼 트랜젝션을 시작 전에 일관된 상태가 아니였다면?
	-아닐 수도 있고 맞을 수도 있음.
************그럼 트랜잭션 하는 중간에는?
	-일관적 상태로 시작했다 하더라도 잠깐 비일관성을 띈다

트랙잭션을 하나씩 수행시키면?
다 수행되도 일관된 상태, 하나만 수행되도 일관된 상태 ( 왜냐? 원자성 때문 )
문제점
여러 사람이 동시작업 불가능 ex) ATM기 전 세계 1개 줄서서 사용

고립성
여러 트랜잭션이 동시에 수행되더라도 마치 혼자 수행한 것과 같아야 함
이 특성 덕분에 현재 우리가 ATM기 여러개 사용 가능
일 처리 순서는 상관 없음. 결과가 달라도 됨.
직렬가능성 **

지속성
